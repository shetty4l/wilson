---
import StatusDot from "./StatusDot.astro";

interface Props {
  id: string;
  name: string;
  status: "green" | "yellow" | "red";
  label: string;
  detail: string;
}

const { id, name, status, label, detail } = Astro.props;

const labelColors = {
  green: "text-green-nerv",
  yellow: "text-amber-nerv",
  red: "text-red-nerv",
};
---

<div
  class="indicator-card bracket-corners cursor-pointer"
  data-status={status}
  data-id={id}
>
  <div class="flex items-start justify-between gap-3">
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-2 mb-1">
        <StatusDot status={status} />
        <h3 class="font-heading font-semibold text-sm text-text truncate">
          {name}
        </h3>
      </div>
      <p class:list={["font-mono text-xs mb-2", labelColors[status]]}>
        {label}
      </p>
      <p class="font-mono text-xs text-text-muted line-clamp-2">
        {detail}
      </p>
    </div>
  </div>
</div>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
